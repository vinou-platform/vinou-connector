# add Vinou-Toasts if it was turned on in the constants
[globalVar = LIT:0 < {$plugin.tx_vinou.settings.javascript.toasts}]
page.includeCSS.toasts = EXT:vinou_connector/Resources/Public/Styles/toasts.css
page.includeJSFooterlibs.toasts = EXT:vinou_connector/Resources/Public/Scripts/toast.min.js

[globalVar = LIT:0 < {$plugin.tx_vinou.settings.javascript.toasts}] && [applicationContext = Development]
page.includeJSFooterlibs.toasts = EXT:vinou_connector/Resources/Private/JavaScript/Src/toast.js

[globalVar = LIT:0 < {$plugin.tx_vinou.settings.javascript.dialogs}]
page.includeCSS.dialogs = EXT:vinou_connector/Resources/Public/Styles/dialogs.css
page.includeJSFooterlibs.dialogs = EXT:vinou_connector/Resources/Public/Scripts/dialog.min.js

[globalVar = LIT:0 < {$plugin.tx_vinou.settings.javascript.dialogs}] && [applicationContext = Development]
page.includeJSFooterlibs.dialogs = EXT:vinou_connector/Resources/Private/JavaScript/Src/dialog.js

# add Vinou-JS (Shop,Enquiry,List) if it was turned on in the constants
[globalVar = LIT:0 < {$plugin.tx_vinou.settings.javascript.vinou}]
page.includeJSFooterlibs {
	listjs = EXT:vinou_connector/Vendor/listjs/list.js
	enquiry = EXT:vinou_connector/Resources/Public/Scripts/enquiry.min.js
	shop = EXT:vinou_connector/Resources/Public/Scripts/shop.min.js
	list = EXT:vinou_connector/Resources/Public/Scripts/list.min.js
}

[globalVar = LIT:0 < {$plugin.tx_vinou.settings.javascript.vinou}] && [applicationContext = Development]
page.includeJSFooterlibs {
	listjs = EXT:vinou_connector/Vendor/listjs/list.js
	enquiry = EXT:vinou_connector/Resources/Private/JavaScript/Src/enquiry.js
	shop = EXT:vinou_connector/Resources/Private/JavaScript/Src/shop.js
	list = EXT:vinou_connector/Resources/Private/JavaScript/Src/list.js
}

# add only shop javascript if it was turned on in the constants
[globalVar = LIT:0 < {$plugin.tx_vinou.settings.javascript.shop}]
page.includeJSFooterlibs {
	listjs = EXT:vinou_connector/Vendor/listjs/list.js
	shop = EXT:vinou_connector/Resources/Public/Scripts/shop.min.js
}

[globalVar = LIT:0 < {$plugin.tx_vinou.settings.javascript.shop}] && [applicationContext = Development]
page.includeJSFooterlibs.shop = EXT:vinou_connector/Resources/Private/JavaScript/Src/shop.js

# add only enquiry javascript if it was turned on in the constants
[globalVar = LIT:0 < {$plugin.tx_vinou.settings.javascript.enquiry}]
page.includeJSFooterlibs.enquiry = EXT:vinou_connector/Resources/Public/Scripts/enquiry.min.js

[globalVar = LIT:0 < {$plugin.tx_vinou.settings.javascript.enquiry}] && [applicationContext = Development]
page.includeJSFooterlibs.enquiry = EXT:vinou_connector/Resources/Private/JavaScript/Src/enquiry.js

# add only list javascript if it was turned on in the constants
[globalVar = LIT:0 < {$plugin.tx_vinou.settings.javascript.list}]
page.includeJSFooterlibs.list = EXT:vinou_connector/Resources/Public/Scripts/list.min.js

[end]

plugin.tx_vinouconnector_wines {
	view {
		templateRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Templates/
			1 = {$plugin.tx_vinouconnector_wines.view.templateRootPath}
		}
		partialRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Partials/
			1 = {$plugin.tx_vinouconnector_wines.view.partialRootPath}
		}
		layoutRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Layouts/
			1 = {$plugin.tx_vinouconnector_wines.view.layoutRootPath}
		}
	}

	settings {
		list {
			regular {
				image {
					maxWidth = 100
					maxHeight = 200
				}
				text {
					crop = 150
					append = ...
				}
			}
			slider {
				image {
					maxWidth = 150
					maxHeight = 400
				}
				text {
					crop = 100
					append = ...
				}
			}
		}

		detail {
			facts = articlenumber,type,grapetypes,tastes_id,vintage,alcohol,sweetness,acid,bottlesize,drinktemperature,price,place,region
			image {
				maxWidth = 200
				maxHeight = 600
			}
		}
	}

	persistence {
		storagePid = 1
	}
}

module.tx_vinouconnector_wines < plugin.tx_vinouconnector_wines


plugin.tx_vinouconnector_products {
	view {
		templateRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Templates/
			1 = {$plugin.tx_vinouconnector_products.view.templateRootPath}
		}
		partialRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Partials/
			1 = {$plugin.tx_vinouconnector_products.view.partialRootPath}
		}
		layoutRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Layouts/
			1 = {$plugin.tx_vinouconnector_products.view.layoutRootPath}
		}
	}

	settings {
		list {
			regular {
				image {
					maxWidth = 100
					maxHeight = 200
				}
				text {
					crop = 150
					append = ...
				}
			}
			slider {
				image {
					maxWidth = 150
					maxHeight = 400
				}
				text {
					crop = 100
					append = ...
				}
			}
		}

		detail {
			image {
				maxWidth = 200
				maxHeight = 600
			}
		}
	}

	persistence {
		storagePid = 1
	}
}

module.tx_vinouconnector_bundles < plugin.tx_vinouconnector_bundles

plugin.tx_vinouconnector_bundles {
	view {
		templateRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Templates/
			1 = {$plugin.tx_vinouconnector_bundles.view.templateRootPath}
		}
		partialRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Partials/
			1 = {$plugin.tx_vinouconnector_bundles.view.partialRootPath}
		}
		layoutRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Layouts/
			1 = {$plugin.tx_vinouconnector_bundles.view.layoutRootPath}
		}
	}

	settings {
		list {
			regular {
				image {
					maxWidth = 100
					maxHeight = 200
				}
				text {
					crop = 150
					append = ...
				}
			}
			slider {
				image {
					maxWidth = 150
					maxHeight = 400
				}
				text {
					crop = 100
					append = ...
				}
			}
		}

		detail {
			image {
				maxWidth = 200
				maxHeight = 600
			}
		}
	}

	persistence {
		storagePid = 1
	}
}

module.tx_vinouconnector_bundles < plugin.tx_vinouconnector_bundles

plugin.tx_vinouconnector_facebook {
	view {
		templateRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Templates/
			1 = {$plugin.tx_vinouconnector_facebook.view.templateRootPath}
		}
		partialRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Partials/
			1 = {$plugin.tx_vinouconnector_facebook.view.partialRootPath}
		}
		layoutRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Layouts/
			1 = {$plugin.tx_vinouconnector_facebook.view.layoutRootPath}
		}
	}
	settings {
		limit = 10
		feed {
			image {
				width = 400
				height = 400
			}
		}
	}
}

module.tx_vinouconnector_facebook < plugin.tx_vinouconnector_facebook

plugin.tx_vinouconnector_enquiry {
	view {
		templateRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Templates/
			1 = {$plugin.tx_vinouconnector_enquiry.view.templateRootPath}
		}
		partialRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Partials/
			1 = {$plugin.tx_vinouconnector_enquiry.view.partialRootPath}
		}
		layoutRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Layouts/
			1 = {$plugin.tx_vinouconnector_enquiry.view.layoutRootPath}
		}
	}
	settings {
		mail {
			wineFields = name,articlenumber,quantity,price
			senderMailTemplate = EXT:vinou_connector/Resources/Private/Templates/Email/EnquirySenderMail.html
			adminMailTemplate = EXT:vinou_connector/Resources/Private/Templates/Email/EnquiryAdminMail.html
		}
	}
}

module.tx_vinouconnector_enquiry < plugin.tx_vinouconnector_enquiry

plugin.tx_vinouconnector_shop {
	view {
		templateRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Templates/
			1 = {$plugin.tx_vinouconnector_shop.view.templateRootPath}
		}
		partialRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Partials/
			1 = {$plugin.tx_vinouconnector_shop.view.partialRootPath}
		}
		layoutRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Layouts/
			1 = {$plugin.tx_vinouconnector_shop.view.layoutRootPath}
		}
	}
	settings {
		list {
			image {
				maxWidth = 100
				maxHeight = 200
			}
			text {
				crop = 150
				append = ...
			}
		}
		billing {
			required = firstname,lastname,address,zip,city,email
		}
		delivery {
			required = firstname,lastname,address,zip,city
		}
		mail {
			senderName = Vinou Wines
			senderEmail = noreply@domain.com
			adminName = Admin
			adminEmail = admin@domain.com
			attachements {
				generalBusinessTerms = 
				cancellationPolicy =
			}
		}
		payment {
			methods = prepaid,paypal,debiting,bill
			default = prepaid
		}
		mandatorySign = *
		minBasketSize = 1
		# packageSteps = 6,12,18,24,30
		manualFilter {
			type {
				10 = secco
				20 = sparkling
				30 = white
				40 = rose
				50 = red
				60 = general
			}
		}
	}
}

module.tx_vinouconnector_shop < plugin.tx_vinouconnector_shop

plugin.tx_vinouconnector_office {
	view {
		templateRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Templates/
			1 = {$plugin.tx_vinouconnector_office.view.templateRootPath}
		}
		partialRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Partials/
			1 = {$plugin.tx_vinouconnector_office.view.partialRootPath}
		}
		layoutRootPaths {
			0 = EXT:vinou_connector/Resources/Private/Layouts/
			1 = {$plugin.tx_vinouconnector_office.view.layoutRootPath}
		}
	}
	settings {
		register {
			required = company,name,address,zip,city,mail
		}
		mandatorySign = *
	}
}

module.tx_vinouconnector_office < plugin.tx_vinouconnector_office

page.headerData {
	999 = TEXT
	999.value (
<script type="text/javascript">
var xhr = new XMLHttpRequest();
xhr.open("POST", '/?eID=vinouActions', true);
xhr.setRequestHeader("Content-Type", "application/json");
xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 && xhr.status === 200) {
        var json = JSON.parse(xhr.responseText);
    }
};
var data = JSON.stringify({"action": "init"});
xhr.send(data);
</script>
	)
}