var vinouList={searchMap:[],list:null,allowedFilter:["place","type","vintage","categories"],arrayProperties:["categories"],clusterSelector:".vinou-cluster-item",containerId:"vinou-list",container:null,options:{valueNames:[{data:["name","vintage","place","type","categories"]}],page:5,pagination:!0},init:function(){this.container=document.getElementById(this.containerId),this.container&&(this.initOptions(),this.initList(),this.loadFilter(),this.bindEvents(),this.initialSearch())},initOptions:function(){$this=this,$this.options.page=document.getElementById($this.containerId).getAttribute("data-items-per-page")},initList:function(){$this=this,$this.list=new List($this.containerId,$this.options),$this.list.sort("sorting",{order:"asc",alphabet:'0123456789AaBbCcDdEÉeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvXxYyZzÅåÄäÖö@"'}),$this.list.update()},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},loadFilter:function(){$this=this;var t=new URL(window.location.href);$this.allowedFilter.forEach((function(e){var i=t.searchParams.get(e);if(i){var s="cluster["+e+"]["+i+"]";document.getElementById(s).checked=!0,$this.searchMap[e]=[],$this.searchMap[e].push(i),document.querySelector("#"+e+"-cluster-group h3").setAttribute("data-status","open"),document.querySelector("#"+e+"-cluster-group ul").style.display="block"}})),$this.filterList()},initialSearch:function(){var t=new URL(window.location.href).searchParams.get("search");t&&(document.getElementById("search-phrase").value=t,this.list.search(t))},filterList:function(){$this=this,$this.list.filter((function(t){for(var e in $this.searchMap)if($this.arrayProperties.indexOf(e)>-1&&t.values()[e]){var i=t.values()[e].split(", "),s=!1;if(i.forEach((function(t){$this.searchMap[e].indexOf(t)>-1&&(s=!0)})),!s)return!1}else if(-1===$this.searchMap[e].indexOf(t.values()[e]))return!1;return!0})),$this.list.update()},bindEvents:function(){for(var t=this,e=document.querySelectorAll(t.clusterSelector),i=0;i<e.length;i++)e[i].addEventListener("change",(function(){var e=this.getAttribute("data-name");if(this.checked)void 0===t.searchMap[e]&&(t.searchMap[e]=[]),t.searchMap[e].push(this.value);else{if(void 0!==t.searchMap[e]){var i=t.searchMap[e].indexOf(this.value);-1!==i&&t.searchMap[e].splice(i,1)}0==t.searchMap[e].length&&delete t.searchMap[e]}t.filterList()}));var s=document.querySelectorAll(".pagination");for(i=0;i<s.length;i++)s[i].addEventListener("click",(function(e){if(e.target&&"page"==e.target.className){var i=document.getElementById(t.containerId);window.scrollTo(i.offsetLeft,i.offsetTop)}}));document.getElementById("search-phrase").addEventListener("keyup",(function(){t.list.search(this.value)}))}};vinouList.init();